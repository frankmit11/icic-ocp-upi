# =================================================================
# Copyright 2021 https://github.com/openshift/installer
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# =================================================================

# =================================================================
# Licensed Materials - Property of IBM
#
# (c) Copyright IBM Corp. 2021 All Rights Reserved
#
# US Government Users Restricted Rights - Use, duplication or
# disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
# =================================================================
#
# Change Summary:
# - Add bastion host
# - Add auto allocated ip
# - Modify items and delete unnecessary Ansible items

all:
  hosts:
    localhost:
      ansible_connection: local
      ansible_python_interpreter: "{{ansible_playbook_python}}"

      # use_network_name: 'vlan_1287'
      # use_network_subnet: 'fe07a275-8314-47b0-b31d-bd6145c6ba2a'

      vm_type: 'zvm' # kvm or zvm
      disk_type: 'dasd' # dasd or scsi
      #volume_type_id: '<storage-template-id>'

      openshift_version: '4.12'
      openshift_minor_version: '17'

      auto_allocated_ip: false  # true or false
      #allocation_pool_start: '<ip range start>'
      #allocation_pool_end: '<ip range end>'
      # os_flavor_bootstrap: 'medium'
      # os_flavor_master: 'ocpmgr_small'
      # os_flavor_worker: 'ocpwrk_medium'

      # create_server_zone: 'z15_AZ'
      os_control_nodes_number: 3
      os_compute_nodes_number: 6

      # os_bootstrap_ip: '10.20.84.59'
      # os_master_ip: ['10.20.84.62', '10.20.84.63', '10.20.84.64']
      # os_infra_ip: ['10.20.84.65', '10.20.84.66', '10.20.84.67']

      use_proxy: false # true or false
      #http_proxy: '<http-proxy>'
      #https_proxy: '<https-proxy>'
      #no_proxy: '<no-proxy>'

      use_localreg: true # true or false
      localreg_mirror: "intreg0.fpet.pokprv.stglabs.ibm.com:5000/secret0/ocp4/openshift4/1217/install"
      localreg_source1: "quay.io/openshift-release-dev/ocp-release"
      localreg_source2: "quay.io/openshift-release-dev/ocp-v4.0-art-dev"
      local_openshift_install: 'http://fpetutil.fpet.pokprv.stglabs.ibm.com/secret0/openshift-install-linux-4.12.17.tar.gz'
      local_openshift_client: 'http://fpetutil.fpet.pokprv.stglabs.ibm.com/secret0/openshift-client-linux.tar.gz'
      local_rhcos_image: 'http://fpetutil.fpet.pokprv.stglabs.ibm.com/secret0/rhcos-4.12.17-390x-live-rootfs.s390x.img'

      additional_certs: |
        additionalTrustBundle: |
          -----BEGIN CERTIFICATE-----
          <cert text>
          -----END CERTIFICATE-----


      # approve_nodes_csr: 35 # minute
      # create_server_timeout: 45 # minute

    # bastion:
    #   ansible_ssh_host: '<linux-server-ip-addr>'
    #   ansible_ssh_common_args: "-o StrictHostKeyChecking=no"
    #   bastion_private_ip_address: '<bastion-ip-addr>'
    #   bastion_public_ip_address: "{{ ansible_default_ipv4.address }}"
    #   dns_forwarder: '<upstream-dns-ip-addr>'

  vars:
    # os_dns_domain: '10.0.10.4'
    cluster_name: 'secret0'
    base_domain: 'fpet.pokprv.stglabs.ibm.com'
    pullsecret: '{"auths":{"intreg0.fpet.pokprv.stglabs.ibm.com:5000": {"auth": "<base64 encoded username:password>"}}}'
    sshkey: '<your ssh public key>'

